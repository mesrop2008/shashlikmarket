<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}–®–∞—à–ª—ã–∫ –ú–∞—Ä–∫–µ—Ç{% endblock %}</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="min-h-screen bg-gradient-to-br from-orange-50 to-red-50 flex flex-col antialiased text-gray-900">

  <!-- Header -->
  <header class="bg-white shadow-lg border-b-2 border-orange-200">

    <!-- Top Bar -->
    <div class="bg-gradient-to-r from-orange-600 to-red-600 text-white py-3">
      <div class="max-w-7xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center gap-4">

        <!-- Banner -->
        <div class="flex items-center gap-3">
          <div class="bg-white/20 p-2 rounded-full">üî•</div>
          <div class="text-center md:text-left">
            <p class="font-bold text-lg">üî• –ì–æ—Ä—è—á–∏–µ —à–∞—à–ª—ã–∫–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å!</p>
            <p class="text-sm text-orange-100">–†–∞–±–æ—Ç–∞–µ–º –µ–∂–µ–¥–Ω–µ–≤–Ω–æ 10:00-22:30</p>
          </div>
        </div>

        <!-- Contacts -->
        <div class="flex flex-col md:flex-row items-center gap-4 text-sm">
          <div class="flex items-center gap-2">üìû <span class="font-semibold">+7 (952) 620-60-60 &nbsp </span></div>
          <div class="flex items-center gap-2">üìç <span>–ò—Ä–∫—É—Ç—Å–∫, —É–ª. –ì–ª–∞–≤–Ω–∞—è –ö–∏—Ä–æ–≤—Å–∫–∞—è,
              –°–ù–¢ –°–∏–±–∏—Ä—å 32</span></div>
          <div class="flex items-center gap-2">‚úâÔ∏è <span>Anulmilik@mail.ru</span></div>
        </div>
      </div>
    </div>

    <!-- Navigation -->
    <nav class="bg-white">
      <div class="max-w-7xl mx-auto px-4">
        <div class="flex items-center justify-between py-4">

          <!-- Logo -->
          <a href="{% url 'home' %}" class="flex items-center gap-3">
            <div
              class="w-12 h-12 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center text-white text-xl">
              üî•</div>
            <div>
              <h1 class="text-2xl font-bold text-gray-900">–®–∞—à–ª—ã–∫ –ú–∞—Ä–∫–µ—Ç</h1>
              <p class="text-sm text-gray-500">–õ—É—á—à–∏–µ —à–∞—à–ª—ã–∫–∏ –≤ –≥–æ—Ä–æ–¥–µ</p>
            </div>
          </a>

          <!-- Desktop Navigation -->
          <div class="hidden lg:flex items-center space-x-1">
            <a href="{% url 'home' %}"
              class="px-4 py-2 rounded-lg font-medium {% if request.resolver_match.url_name == 'home' %}text-orange-600 bg-orange-100 shadow-sm{% else %}text-gray-700 hover:bg-gray-100{% endif %}">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="{% url 'menu' %}"
              class="px-4 py-2 rounded-lg font-medium {% if request.resolver_match.url_name in menu_urls %}text-orange-600 bg-orange-100 shadow-sm{% else %}text-gray-700 hover:bg-gray-100{% endif %}">–ú–µ–Ω—é</a>
            <a href="{% url 'cart' %}"
              class="relative px-4 py-2 rounded-lg font-medium {% if request.resolver_match.url_name == 'cart' %}text-orange-600 bg-orange-100 shadow-sm{% else %}text-gray-700 hover:bg-gray-100{% endif %}">
              –ö–æ—Ä–∑–∏–Ω–∞
              <span class="cart-counter absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center {% if cart_total_quantity == 0 %}hidden{% endif %}">
                {{ cart_total_quantity }}
              </span>
            </a>
            <a href="{% url 'orders' %}"
              class="px-4 py-2 rounded-lg font-medium {% if request.resolver_match.url_name == 'orders' %}text-orange-600 bg-orange-100 shadow-sm{% else %}text-gray-700 hover:bg-gray-100{% endif %}">–ú–æ–∏
              –∑–∞–∫–∞–∑—ã</a>
            <a href="{% url 'delivery' %}"
              class="px-4 py-2 rounded-lg font-medium {% if request.resolver_match.url_name == 'delivery' %}text-orange-600 bg-orange-100 shadow-sm{% else %}text-gray-700 hover:bg-gray-100{% endif %}">–î–æ—Å—Ç–∞–≤–∫–∞
              –∏ –æ–ø–ª–∞—Ç–∞</a>
            <a href="{% url 'contacts' %}"
              class="px-4 py-2 rounded-lg font-medium {% if request.resolver_match.url_name == 'contacts' %}text-orange-600 bg-orange-100 shadow-sm{% else %}text-gray-700 hover:bg-gray-100{% endif %}">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
          </div>

          <!-- Cart Icon (Mobile) -->
          <a href="{% url 'cart' %}" class="lg:hidden relative">
            <div class="p-2 rounded-full bg-orange-100 text-orange-600 text-lg">üõí</div>
            <span class="cart-counter absolute -top-1 -right-1 bg-orange-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center {% if cart_total_quantity == 0 %}hidden{% endif %}">
              {{ cart_total_quantity }}
            </span>
          </a>
        </div>

        <!-- Mobile Navigation -->
        <div class="lg:hidden border-t border-gray-200 py-3 overflow-x-auto">
          <div class="flex space-x-6 min-w-max text-sm font-medium">
            <a href="{% url 'home' %}"
              class="px-3 py-1 rounded-full {% if request.resolver_match.url_name == 'home' %}bg-orange-100 text-orange-600{% else %}text-gray-700 hover:bg-gray-100{% endif %}">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="{% url 'menu' %}"
              class="px-3 py-1 rounded-full {% if request.resolver_match.url_name in menu_urls %}bg-orange-100 text-orange-600{% else %}text-gray-700 hover:bg-gray-100{% endif %}">–ú–µ–Ω—é</a>
            <a href="{% url 'cart' %}"
              class="px-3 py-1 rounded-full {% if request.resolver_match.url_name == 'cart' %}bg-orange-100 text-orange-600{% else %}text-gray-700 hover:bg-gray-100{% endif %}">–ö–æ—Ä–∑–∏–Ω–∞</a>
            <a href="{% url 'orders' %}"
              class="px-3 py-1 rounded-full {% if request.resolver_match.url_name == 'orders' %}bg-orange-100 text-orange-600{% else %}text-gray-700 hover:bg-gray-100{% endif %}">–ú–æ–∏
              –∑–∞–∫–∞–∑—ã</a>
            <a href="{% url 'delivery' %}"
              class="px-3 py-1 rounded-full {% if request.resolver_match.url_name == 'delivery' %}bg-orange-100 text-orange-600{% else %}text-gray-700 hover:bg-gray-100{% endif %}">–î–æ—Å—Ç–∞–≤–∫–∞
              –∏ –æ–ø–ª–∞—Ç–∞</a>
            <a href="{% url 'contacts' %}"
              class="px-3 py-1 rounded-full {% if request.resolver_match.url_name == 'contacts' %}bg-orange-100 text-orange-600{% else %}text-gray-700 hover:bg-gray-100{% endif %}">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <!-- Main Content -->
  <main class="flex-1">
    {% block content %}
    <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    {% endblock %}
  </main>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white mt-16">
    <div class="max-w-7xl mx-auto px-4 py-12">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">

        <!-- Logo + About -->
        <div>
          <div class="flex items-center gap-3 mb-4">
            <div
              class="w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center text-white">
              üî•</div>
            <h3 class="text-xl font-bold">–®–∞—à–ª—ã–∫ –ú–∞—Ä–∫–µ—Ç</h3>
          </div>
          <p class="text-gray-400">
            –õ—É—á—à–∏–µ —à–∞—à–ª—ã–∫–∏ –≤ –ò—Ä–∫—É—Ç—Å–∫–µ —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π –Ω–∞ –¥–æ–º. –ì–æ—Ç–æ–≤–∏–º —Ç–æ–ª—å–∫–æ –∏–∑ —Å–≤–µ–∂–µ–≥–æ –º—è—Å–∞ –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∏—Ö —É–≥–ª—è—Ö.
          </p>
        </div>

        <!-- Menu -->
        <div>
          <h4 class="font-semibold mb-4 text-orange-400">–ú–µ–Ω—é</h4>
          <ul class="space-y-2 text-gray-400">
            <li><a href="{% url 'menu' %}">–®–∞—à–ª—ã–∫–∏</a></li>
            <li><a href="{% url 'menu' %}">–°–µ—Ç—ã</a></li>
            <li><a href="{% url 'menu' %}">–°–∞–ª–∞—Ç—ã</a></li>
            <li><a href="{% url 'menu' %}">–ù–∞–ø–∏—Ç–∫–∏</a></li>
          </ul>
        </div>

        <!-- Info -->
        <div>
          <h4 class="font-semibold mb-4 text-orange-400">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
          <ul class="space-y-2 text-gray-400">
            <li><a href="{% url 'delivery' %}">–î–æ—Å—Ç–∞–≤–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞</a></li>
            <li><a href="{% url 'contacts' %}">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
            <li><a href="#">–ê–∫—Ü–∏–∏</a></li>
          </ul>
        </div>

        <!-- Contacts -->
        <div>
          <h4 class="font-semibold mb-4 text-orange-400">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
          <div class="space-y-2 text-gray-400">
            <p>üìû +7 (952) 620-60-60</p>
            <p>‚úâÔ∏è Anulmilik@mail.ru </p>
            <p>üìç —É–ª. –ì–ª–∞–≤–Ω–∞—è –ö–∏—Ä–æ–≤—Å–∫–∞—è,
              –°–ù–¢ –°–∏–±–∏—Ä—å 32</p>
          </div>
        </div>
      </div>

      <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
        <p>&copy; 2024 –®–∞—à–ª—ã–∫ –ú–∞—Ä–∫–µ—Ç. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
      </div>
    </div>
  </footer>

<script>
// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ—Ä–∑–∏–Ω–æ–π
function updateCartCounter(totalQuantity) {
    const cartCounters = document.querySelectorAll('.cart-counter');
    cartCounters.forEach(counter => {
        counter.textContent = totalQuantity;
        if (totalQuantity > 0) {
            counter.classList.remove('hidden');
        } else {
            counter.classList.add('hidden');
        }
    });
}

function updateProductUI(productId, quantity) {
    // –ò—â–µ–º –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ —Å –¥–∞–Ω–Ω—ã–º productId
    const productCards = document.querySelectorAll(`[data-product-id="${productId}"]`);
    
    productCards.forEach(element => {
        const productCard = element.closest('.group') || element;
        
        if (productCard) {
            const quantityControls = productCard.querySelector('.quantity-controls');
            const addButton = productCard.querySelector('.add-to-cart-button');
            const quantitySpan = productCard.querySelector('.product-quantity');
            
            if (quantity > 0) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω—Ç—Ä–æ–ª—ã –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞, —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
                if (addButton) {
                    addButton.style.display = 'none';
                    addButton.classList.add('hidden');
                }
                if (quantityControls) {
                    quantityControls.style.display = 'flex';
                    quantityControls.classList.remove('hidden');
                }
                if (quantitySpan) {
                    quantitySpan.textContent = quantity;
                }
            } else {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è, —Å–∫—Ä—ã–≤–∞–µ–º –∫–æ–Ω—Ç—Ä–æ–ª—ã –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
                if (addButton) {
                    addButton.style.display = 'block';
                    addButton.classList.remove('hidden');
                }
                if (quantityControls) {
                    quantityControls.style.display = 'none';
                    quantityControls.classList.add('hidden');
                }
            }
        }
    });
}

function updateCartItem(productId, quantity, subtotal) {
    const cartItem = document.querySelector(`.cart-item[data-product-id="${productId}"]`);
    if (!cartItem) return;
    
    const quantitySpan = cartItem.querySelector('.product-quantity');
    const subtotalSpan = cartItem.querySelector('.product-subtotal');
    
    if (quantitySpan) quantitySpan.textContent = quantity;
    if (subtotalSpan) subtotalSpan.textContent = subtotal + '‚ÇΩ';
}

function removeCartItem(productId) {
    const cartItem = document.querySelector(`.cart-item[data-product-id="${productId}"]`);
    if (cartItem) {
        cartItem.remove();
    }
}

function updateCartTotal(total) {
    const totalElement = document.querySelector('.cart-total');
    if (totalElement) {
        totalElement.textContent = total + '‚ÇΩ';
    }
}

function checkEmptyCart() {
    const cartItems = document.querySelectorAll('.cart-item');
    const emptyCart = document.querySelector('.empty-cart');
    const cartContent = document.querySelector('.cart-content');
    
    if (cartItems.length === 0) {
        if (cartContent) cartContent.style.display = 'none';
        if (emptyCart) emptyCart.style.display = 'block';
    } else {
        if (cartContent) cartContent.style.display = 'block';
        if (emptyCart) emptyCart.style.display = 'none';
    }
}

function showNotification(message, type = 'success') {
    const existingNotifications = document.querySelectorAll('.ajax-notification');
    existingNotifications.forEach(notification => notification.remove());
    
    const notification = document.createElement('div');
    notification.className = `ajax-notification fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transform transition-transform duration-300 ${
        type === 'success' ? 'bg-green-500 text-white' : 'bg-red-500 text-white'
    }`;
    notification.textContent = message;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.remove();
    }, 3000);
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–æ—Ä–∑–∏–Ω—ã
document.addEventListener('DOMContentLoaded', function() {
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–æ–∫ "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –º–µ–Ω—é
    document.addEventListener('click', function(e) {
        const addButton = e.target.closest('.add-to-cart-button');
        if (addButton) {
            e.preventDefault();
            
            const productId = addButton.dataset.productId;
            const productName = addButton.dataset.productName;
            
            const originalText = addButton.innerHTML;
            addButton.innerHTML = '–î–æ–±–∞–≤–ª—è–µ–º...';
            addButton.disabled = true;
            
            fetch(`/add/${productId}/`, {
                method: 'GET',
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                }
            })
            .then(response => {
                if (!response.ok) throw new Error('Network response was not ok');
                return response.json();
            })
            .then(data => {
                if (data.success) {
                    updateCartCounter(data.cart_total_quantity);
                    updateProductUI(data.product_id, data.product_quantity);
                    showNotification(data.message, 'success'); // –£–í–ï–î–û–ú–õ–ï–ù–ò–ï –í –ú–ï–ù–Æ
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showNotification('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É', 'error');
                window.location.href = addButton.href;
            })
            .finally(() => {
                addButton.disabled = false;
                addButton.innerHTML = originalText;
            });
        }
    });
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–æ–∫ "+" –≤ –±–ª–æ–∫–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –º–µ–Ω—é
    document.addEventListener('click', function(e) {
        const addInControls = e.target.closest('.add-in-controls');
        if (addInControls) {
            e.preventDefault();
            
            const productId = addInControls.dataset.productId;
            
            fetch(`/add/${productId}/`, {
                method: 'GET',
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                }
            })
            .then(response => {
                if (!response.ok) throw new Error('Network response was not ok');
                return response.json();
            })
            .then(data => {
                if (data.success) {
                    updateCartCounter(data.cart_total_quantity);
                    updateProductUI(data.product_id, data.product_quantity);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showNotification('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞', 'error');
                window.location.href = addInControls.href;
            });
        }
    });
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–æ–∫ "-" (—É–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ) –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –º–µ–Ω—é
    document.addEventListener('click', function(e) {
        const removeButton = e.target.closest('.remove-quantity-btn');
        if (removeButton) {
            e.preventDefault();
            
            const productId = removeButton.dataset.productId;
            
            fetch(`/removeq/${productId}/`, {
                method: 'GET',
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                }
            })
            .then(response => {
                if (!response.ok) throw new Error('Network response was not ok');
                return response.json();
            })
            .then(data => {
                if (data.success) {
                    updateCartCounter(data.cart_total_quantity);
                    updateProductUI(data.product_id, data.product_quantity);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showNotification('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞', 'error');
                window.location.href = removeButton.href;
            });
        }
    });
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ö–û–†–ó–ò–ù–´ (–±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
    // –ö–Ω–æ–ø–∫–∞ "+" –≤ –∫–æ—Ä–∑–∏–Ω–µ
    document.addEventListener('click', function(e) {
        const cartAddBtn = e.target.closest('.cart-add-btn');
        if (cartAddBtn) {
            e.preventDefault();
            
            const productId = cartAddBtn.dataset.productId;
            
            fetch(`/add/${productId}/`, {
                method: 'GET',
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    updateCartCounter(data.cart_total_quantity);
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω–µ
                    const cartItem = document.querySelector(`.cart-item[data-product-id="${productId}"]`);
                    if (cartItem) {
                        const quantitySpan = cartItem.querySelector('.product-quantity');
                        const subtotalSpan = cartItem.querySelector('.product-subtotal');
                        const price = parseFloat(cartItem.dataset.price);
                        
                        if (quantitySpan) quantitySpan.textContent = data.product_quantity;
                        if (subtotalSpan) subtotalSpan.textContent = (price * data.product_quantity).toFixed(0) + '‚ÇΩ';
                    }
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â—É—é —Å—É–º–º—É
                    updateCartTotal(data.cart_total);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                window.location.href = cartAddBtn.href;
            });
        }
    });
    
    // –ö–Ω–æ–ø–∫–∞ "-" –≤ –∫–æ—Ä–∑–∏–Ω–µ
    document.addEventListener('click', function(e) {
        const cartRemoveBtn = e.target.closest('.cart-remove-btn');
        if (cartRemoveBtn) {
            e.preventDefault();
            
            const productId = cartRemoveBtn.dataset.productId;
            
            fetch(`/removeq/${productId}/`, {
                method: 'GET',
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    updateCartCounter(data.cart_total_quantity);
                    
                    if (data.product_quantity > 0) {
                        // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω–µ
                        const cartItem = document.querySelector(`.cart-item[data-product-id="${productId}"]`);
                        if (cartItem) {
                            const quantitySpan = cartItem.querySelector('.product-quantity');
                            const subtotalSpan = cartItem.querySelector('.product-subtotal');
                            const price = parseFloat(cartItem.dataset.price);
                            
                            if (quantitySpan) quantitySpan.textContent = data.product_quantity;
                            if (subtotalSpan) subtotalSpan.textContent = (price * data.product_quantity).toFixed(0) + '‚ÇΩ';
                        }
                    } else {
                        // –£–¥–∞–ª—è–µ–º —Ç–æ–≤–∞—Ä –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
                        removeCartItem(productId);
                    }
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â—É—é —Å—É–º–º—É
                    updateCartTotal(data.cart_total);
                    checkEmptyCart();
                }
            })
            .catch(error => {
                console.error('Error:', error);
                window.location.href = cartRemoveBtn.href;
            });
        }
    });
    
    // –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã (–ø–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ) - –ë–ï–ó ALERT!
    document.addEventListener('click', function(e) {
        const removeItemBtn = e.target.closest('.cart-remove-item-btn');
        if (removeItemBtn) {
            e.preventDefault();
            
            const productId = removeItemBtn.dataset.productId;
            
            // –£–î–ê–õ–ò–õ –ï–ë–ê–ù–´–ô ALERT - —Å—Ä–∞–∑—É —É–¥–∞–ª—è–µ–º —Ç–æ–≤–∞—Ä
            fetch(`/remove/${productId}/`, {
                method: 'GET',
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    updateCartCounter(data.cart_total_quantity);
                    removeCartItem(productId);
                    updateCartTotal(data.cart_total);
                    checkEmptyCart();
                }
            })
            .catch(error => {
                console.error('Error:', error);
                window.location.href = removeItemBtn.href;
            });
        }
    });
});
</script>
</body>

</html>