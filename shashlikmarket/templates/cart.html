<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ö–æ—Ä–∑–∏–Ω–∞</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
  {% extends "layout.html" %}
  {% load static %}
  {% block content %}
  <div class="max-w-4xl mx-auto px-4 py-12">
    <h1 class="text-3xl font-bold text-gray-900 mb-8 flex items-center gap-3">
      üõí –ö–æ—Ä–∑–∏–Ω–∞
    </h1>

    <div class="cart-content">
      {% if items %}
      <div class="space-y-6">
        <!-- Cart Items -->
        <div class="bg-white rounded-lg shadow-lg overflow-hidden">
          <div class="p-6 border-b border-gray-200">
            <h2 class="text-xl font-semibold text-gray-900">–í–∞—à–∏ —Ç–æ–≤–∞—Ä—ã</h2>
          </div>
          
          <div class="p-6 space-y-4" id="cart-items-container">
            {% for product in items %}
            <!-- –¢–æ–≤–∞—Ä -->
            <div class="cart-item flex items-center gap-4 p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow" 
                 data-product-id="{{ product.product.id }}" 
                 data-price="{{ product.price }}">
              <!-- –ö–∞—Ä—Ç–∏–Ω–∫–∞ —Ç–æ–≤–∞—Ä–∞ -->
              <img src="{{ product.imagepath }}?f_auto,q_auto,w_300,h_300,c_fill,g_auto" alt="{{ product.name }}" loading="lazy"
                   class="w-20 h-20 object-cover rounded-lg flex-shrink-0">

              <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ -->
              <div class="flex-1 min-w-0">
                <h3 class="font-semibold text-gray-900 text-lg mb-1">{{ product.name }}</h3>
                <p class="text-gray-600">{{ product.price }}‚ÇΩ –∑–∞ –ø–æ—Ä—Ü–∏—é</p>
              </div>

              <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º -->
              <div class="flex items-center gap-3 bg-gray-100 rounded-lg px-3 py-2">
                <a href="{% url 'remove_quantity' product.product.id %}" 
                   data-product-id="{{ product.product.id }}"
                   class="cart-remove-btn w-8 h-8 flex items-center justify-center bg-white rounded-full shadow-sm hover:bg-gray-50 transition-colors">
                  <span class="text-lg font-bold">-</span>
                </a>
                <span class="product-quantity w-12 text-center font-semibold text-gray-900">{{ product.quantity }}</span>
                <a href="{% url 'add_to_cart' product.product.id %}" 
                   data-product-id="{{ product.product.id }}"
                   class="cart-add-btn w-8 h-8 flex items-center justify-center bg-white rounded-full shadow-sm hover:bg-gray-50 transition-colors">
                  <span class="text-lg font-bold">+</span>
                </a>
              </div>

              <!-- –¶–µ–Ω–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ -->
              <div class="text-right flex flex-col items-end gap-2">
                <p class="product-subtotal font-semibold text-lg text-gray-900">{{ product.subtotal }}‚ÇΩ</p>
                <a href="{% url 'remove_from_cart' product.product.id %}" 
                   data-product-id="{{ product.product.id }}"
                   data-product-name="{{ product.name }}"
                   class="cart-remove-item-btn text-red-500 hover:text-red-700 transition-colors p-2 rounded-full hover:bg-red-50"
                   title="–£–¥–∞–ª–∏—Ç—å –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã">
                  üóëÔ∏è
                </a>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>

        <!-- –ò—Ç–æ–≥–æ –∏ –∫–Ω–æ–ø–∫–∞ –∑–∞–∫–∞–∑–∞ -->
        <div class="bg-white rounded-lg shadow-lg p-6">
          <div class="flex items-center justify-between text-xl font-bold mb-6 pb-4 border-b border-gray-200">
            <span class="text-gray-900">–ò—Ç–æ–≥–æ:</span>
            <span class="cart-total text-orange-600">{{ total }}‚ÇΩ</span>
          </div>

          <a href="{% url 'create_order' %}"
            class="w-full block text-center bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-semibold px-4 py-4 rounded-lg transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]">
            –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
          </a>
          
          <!-- –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏ -->
          <a href="{% url 'menu' %}"
            class="w-full block text-center border border-gray-300 text-gray-700 font-semibold px-4 py-3 rounded-lg mt-3 hover:bg-gray-50 transition-colors">
            ‚Üê –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏
          </a>
        </div>
      </div>
      {% else %}
      <!-- –ü—É—Å—Ç–∞—è –∫–æ—Ä–∑–∏–Ω–∞ -->
      <div class="empty-cart text-center py-16">
        <div class="text-8xl mb-6">üõí</div>
        <h1 class="text-3xl font-bold text-gray-900 mb-4">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</h1>
        <p class="text-xl text-gray-600 mb-8 max-w-md mx-auto">
          –î–æ–±–∞–≤—å—Ç–µ –≤–∫—É—Å–Ω—ã–µ —à–∞—à–ª—ã–∫–∏ –∏–∑ –Ω–∞—à–µ–≥–æ –º–µ–Ω—é
        </p>
        <a href="{% url 'menu' %}"
          class="inline-block bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-semibold px-8 py-4 rounded-lg transition-all duration-300">
          –ü–µ—Ä–µ–π—Ç–∏ –∫ –º–µ–Ω—é
        </a>
      </div>
      {% endif %}
    </div>
  </div>
  {% endblock %}
</body>

</html>